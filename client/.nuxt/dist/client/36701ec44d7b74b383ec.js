(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{429:function(t,e,o){var content=o(487);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(32).default)("5a28014a",content,!0,{sourceMap:!1})},430:function(t,e,o){var content=o(489);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(32).default)("24bb07a5",content,!0,{sourceMap:!1})},486:function(t,e,o){"use strict";var n=o(429);o.n(n).a},487:function(t,e,o){(t.exports=o(31)(!1)).push([t.i,".photo[data-v-41d29e88],.video[data-v-41d29e88]{border:1px solid #000;box-shadow:2px 2px 3px #000;width:320px;height:240px}.camera[data-v-41d29e88],.output[data-v-41d29e88]{width:340px;display:inline-block}.startbutton[data-v-41d29e88]{display:block;position:relative;margin-left:auto;margin-right:auto;bottom:32px;background-color:rgba(0,150,0,.5);border:1px solid hsla(0,0%,100%,.7);box-shadow:0 0 1px 2px rgba(0,0,0,.2);font-size:14px;color:#fff}.contentarea[data-v-41d29e88],.startbutton[data-v-41d29e88]{font-family:Lucida Grande,Arial,sans-serif}.contentarea[data-v-41d29e88]{font-size:16px;width:760px}.canvas[data-v-41d29e88],.output[data-v-41d29e88]{display:none}",""])},488:function(t,e,o){"use strict";var n=o(430);o.n(n).a},489:function(t,e,o){(t.exports=o(31)(!1)).push([t.i,".icons[data-v-57af0004]{font-size:30px;color:#1f568c;cursor:pointer}hr.new1[data-v-57af0004]{border-top:1px solid #1f568c}#file-input[data-v-57af0004]{display:none}",""])},512:function(t,e,o){"use strict";o.r(e);o(59);var n=o(20),r={data:function(){return{width:320,height:0,streaming:!1,video:null,canvas:null,photo:null,startbutton:null}},components:{},mounted:function(){var t=this;this.video=this.$el.getElementsByClassName("video"),this.canvas=this.$el.getElementsByClassName("canvas"),this.photo=this.$el.getElementsByClassName("photo"),this.startbutton=this.$el.getElementsByClassName("startbutton"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){t.video[0].srcObject=e,t.video[0].play()}).catch(function(t){console.log("An error occurred: "+t)}),document.querySelector(".video").addEventListener("canplay",function(t){this.streaming||(this.height=this.videoHeight/(this.videoWidth/320),isNaN(this.height)&&(this.height=this.width/(4/3)),this.setAttribute("width",1e3),this.setAttribute("height",1e3),this.parentNode.parentElement.children[1].setAttribute("width",320),this.parentNode.parentElement.children[1].setAttribute("height",240),this.streaming=!0)},!1),this.clearphoto()},methods:{clearphoto:function(){var t=this.canvas[0].getContext("2d");t.fillStyle="#AAA",t.fillRect(0,0,this.canvas[0].width,this.canvas[0].height);var data=this.canvas[0].toDataURL("image/png");this.$el.getElementsByClassName("photo")[0].setAttribute("src",data)},takepicture:function(){var t=this.canvas[0].getContext("2d");if(this.width){t.drawImage(this.video[0],0,0,this.width,240);var data=this.canvas[0].toDataURL("image/png");localStorage.setItem("src",data),this.$el.getElementsByClassName("photo")[0].setAttribute("src",data),this.$store.state.frontpage=!0,this.$store.state.gotocamera=!1}else this.clearphoto()}}},c=(o(486),o(10)),l=Object(c.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"contentarea"},[o("div",{staticClass:"camera"},[o("video",{staticClass:"video"},[t._v("Video stream not available.")]),t._v(" "),o("button",{staticClass:"startbutton",on:{click:function(e){return t.takepicture()}}},[t._v("Take photo")])]),t._v(" "),o("canvas",{staticClass:"canvas"}),t._v(" "),t._m(0)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"output"},[e("img",{staticClass:"photo",attrs:{alt:"The screen capture will appear in this box."}})])}],!1,null,"41d29e88",null).exports,d=o(445),h=o(406),v={layout:function(t){return"discover"},components:{CameraOn:l,TextEditor:d.a},data:function(){return{sendForm:!1,selectedFile:""}},methods:{camerafunc:function(){this.$store.state.frontpage=!1,this.$store.state.gotocamera=!0},publish:function(){this.sendForm=!0,localStorage.src=""},onFileChanged:function(t){this.selectedFile=t.target.files[0],this.onUpload()},onUpload:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,o,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e={headers:{"Content-Type":"multipart/form-data",token:localStorage.accessToken}},(o=new FormData).append("file",this.selectedFile),h.a.postData_onlogin("discover/publish",o,e).then(function(t){console.log("resp",t),"success"==t.data.message&&n.$router.push("feed")}).catch(function(t){console.log("error",t.response.data.message)});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},f=(o(488),Object(c.a)(v,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[this.$store.state.frontpage?o("div",[o("v-toolbar",{staticClass:"pa-0",staticStyle:{background:"#366696"},attrs:{app:"",dark:"",absolute:"",id:"meca--header"}},[o("v-container",{attrs:{fluid:"","pa-0":"","fill-height":""}},[o("v-layout",{attrs:{"align-center":""}},[o("v-flex",[o("nuxt-link",{attrs:{to:""}},[o("div",{on:{click:function(e){return t.$router.go(-1)}}},[o("v-icon",[t._v("mdi-arrow-left")])],1)])],1),t._v(" "),o("v-btn",{staticStyle:{"background-color":"#325272",border:"1.5px solid white","border-radius":"8px"},on:{click:function(e){return t.publish()}}},[t._v("Publish")])],1)],1)],1),t._v(" "),o("v-container",{staticClass:"mt-5"},[o("text-editor",{attrs:{sendForm:t.sendForm}}),t._v(" "),o("hr",{staticClass:"new1"}),t._v(" "),o("div",{staticClass:"ml-2 labels"},[o("v-icon",{staticClass:"ml-4 icons camera",on:{click:function(e){return t.camerafunc()}}},[t._v("camera_alt")]),t._v(" "),o("label",{attrs:{for:"file-input"}},[o("v-icon",{staticClass:"ml-4 icons image"},[t._v("add_to_photos")])],1),t._v(" "),o("input",{attrs:{id:"file-input",type:"file",name:"file"},on:{change:t.onFileChanged}}),t._v(" "),o("v-icon",{staticClass:"ml-4 icons car"},[t._v("airport_shuttle")]),t._v(" "),o("v-icon",{staticClass:"ml-4 icons user"},[t._v("person")]),t._v(" "),o("v-icon",{staticClass:"ml-4 icons location"},[t._v("add_location")])],1)],1)],1):t._e(),t._v(" "),this.$store.state.gotocamera?o("div",[o("camera-on")],1):t._e()])},[],!1,null,"57af0004",null));e.default=f.exports}}]);